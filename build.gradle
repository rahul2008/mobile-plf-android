//Do not edit this file

buildscript {
    apply from: projectDir.absolutePath + '/build-support/gradle/versions.gradle'

    repositories {
        maven { url repos.jcenter }

        maven {
            url repos.plugin
            credentials {
                username = "readonly"
                password = "123qweasdzxc"
            }
        }
    }
    dependencies {
        classpath builddeps.cdpSCM
        classpath builddeps.gradle
        classpath builddeps.buildinfoextractor
        classpath builddeps.androidapt // dsc & rap requires this
        classpath builddeps.googleservices // rap-pushnotification requires this
        classpath builddeps.pitest
    }
}

def environment = 'production'
if (project.hasProperty('envCode')) {
    environment = envCode
    println "envCode: ${envCode}"
} else {
    println "default envCode"
}

apply plugin: 'cdpSCM'
import com.philips.cdp.cdpSCM

def objcdp = new cdpSCM()
objcdp.setProjectDir(projectDir)
objcdp.setEnv(platform: 'android', env: environment)

println "Working branch: ${objcdp.getWorkingBranch()}"


subprojects {
    buildscript {
        apply from: project.rootDir.absolutePath + '/build-support/gradle/versions.gradle'

        repositories {
            maven {
                url repos.jcenter
            }
            maven {
                url repos.plugin
                credentials {
                    username = "readonly"
                    password = "123qweasdzxc"
                }
            }
        }
    }

    group = 'com.philips.cdp'
    version = platformversion

    if (!it.projectDir.exists()) {
        throw new GradleException("Project not found ${it}")
    }

    repositories {
        maven { url repos.jcenter }
        maven {
            url repos.plugin
            credentials {
                username = "readonly"
                password = "123qweasdzxc"
            }
        }
    }

    ext.useprojectdependencies = true
}

configurations {
    compile
    debugCompile
    releaseCompile
}